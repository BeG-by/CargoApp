{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\projects\\\\cargo_app\\\\frontend\\\\src\\\\web_socket\\\\hooks\\\\handlers\\\\use-new-waybill-message-handler.js\";\nimport React from \"react\";\nimport { makeRequest, WAYBILL_NOTIFICATION_DATA_URL } from \"../../../components/parts/util/request-util\";\nimport useWaybillInfoForm from \"../forms/use-waybill-info-form\";\nvar TOAST_TITLE = \"New waybill\";\nexport default function useNewWaybillMessageHandler() {\n  var _this = this;\n\n  var _useWaybillInfoForm = useWaybillInfoForm(),\n      _useWaybillInfoForm2 = _slicedToArray(_useWaybillInfoForm, 2),\n      WaybillDialogComponent = _useWaybillInfoForm2[0],\n      openWaybillDialog = _useWaybillInfoForm2[1];\n\n  var loadWaybillNotificationData = function loadWaybillNotificationData(waybillId) {\n    return makeRequest(\"GET\", WAYBILL_NOTIFICATION_DATA_URL + \"/\" + waybillId);\n  };\n\n  var convertToStringAndFormat = function convertToStringAndFormat(waybillNotificationData) {\n    var data = waybillNotificationData;\n    return [\"Invoice Number: \", React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 33\n      }\n    }, data.invoiceNumber), React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 13\n      }\n    }), \"Registration user: \", React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 36\n      }\n    }, data.registrationUser.name, \" \", data.registrationUser.surname), React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 13\n      }\n    })];\n  };\n\n  var handleNewWaybillMessage = function handleNewWaybillMessage(messageData, openActionToast) {\n    var response, formatData;\n    return _regeneratorRuntime.async(function handleNewWaybillMessage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(loadWaybillNotificationData(messageData.waybillId));\n\n          case 2:\n            response = _context.sent;\n            formatData = convertToStringAndFormat(response.data);\n            openActionToast(TOAST_TITLE, formatData, function () {\n              return openWaybillDialog(messageData.waybillId);\n            });\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return [WaybillDialogComponent, handleNewWaybillMessage];\n}","map":{"version":3,"sources":["D:/projects/cargo_app/frontend/src/web_socket/hooks/handlers/use-new-waybill-message-handler.js"],"names":["React","makeRequest","WAYBILL_NOTIFICATION_DATA_URL","useWaybillInfoForm","TOAST_TITLE","useNewWaybillMessageHandler","WaybillDialogComponent","openWaybillDialog","loadWaybillNotificationData","waybillId","convertToStringAndFormat","waybillNotificationData","data","invoiceNumber","registrationUser","name","surname","handleNewWaybillMessage","messageData","openActionToast","response","formatData"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACIC,WADJ,EAEIC,6BAFJ;AAIA,OAAOC,kBAAP;AAEA,IAAMC,WAAW,GAAG,aAApB;AAEA,eAAe,SAASC,2BAAT,GAAuC;AAAA;;AAAA,4BACEF,kBAAkB,EADpB;AAAA;AAAA,MAC3CG,sBAD2C;AAAA,MACnBC,iBADmB;;AAGlD,MAAMC,2BAA2B,GAAG,SAA9BA,2BAA8B,CAACC,SAAD,EAAe;AAC/C,WAAOR,WAAW,CAAC,KAAD,EAAQC,6BAA6B,GAAG,GAAhC,GAAsCO,SAA9C,CAAlB;AACH,GAFD;;AAIA,MAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,uBAAD,EAA6B;AAC1D,QAAMC,IAAI,GAAGD,uBAAb;AACA,WAAO,CACH,kBADG,EACiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAASC,IAAI,CAACC,aAAd,CADjB,EAEH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFG,EAGH,qBAHG,EAGoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAASD,IAAI,CAACE,gBAAL,CAAsBC,IAA/B,OAAsCH,IAAI,CAACE,gBAAL,CAAsBE,OAA5D,CAHpB,EAIH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJG,CAAP;AAMH,GARD;;AAUA,MAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAOC,WAAP,EAAoBC,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACPX,2BAA2B,CAACU,WAAW,CAACT,SAAb,CADpB;;AAAA;AACxBW,YAAAA,QADwB;AAExBC,YAAAA,UAFwB,GAEXX,wBAAwB,CAACU,QAAQ,CAACR,IAAV,CAFb;AAG5BO,YAAAA,eAAe,CAACf,WAAD,EAAciB,UAAd,EAA0B;AAAA,qBAAMd,iBAAiB,CAACW,WAAW,CAACT,SAAb,CAAvB;AAAA,aAA1B,CAAf;;AAH4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhC;;AAMA,SAAO,CAACH,sBAAD,EAAyBW,uBAAzB,CAAP;AACH","sourcesContent":["import React from \"react\";\r\nimport {\r\n    makeRequest,\r\n    WAYBILL_NOTIFICATION_DATA_URL\r\n} from \"../../../components/parts/util/request-util\";\r\nimport useWaybillInfoForm from \"../forms/use-waybill-info-form\";\r\n\r\nconst TOAST_TITLE = \"New waybill\"\r\n\r\nexport default function useNewWaybillMessageHandler() {\r\n    const [WaybillDialogComponent, openWaybillDialog] = useWaybillInfoForm();\r\n\r\n    const loadWaybillNotificationData = (waybillId) => {\r\n        return makeRequest(\"GET\", WAYBILL_NOTIFICATION_DATA_URL + \"/\" + waybillId);\r\n    }\r\n\r\n    const convertToStringAndFormat = (waybillNotificationData) => {\r\n        const data = waybillNotificationData;\r\n        return [\r\n            \"Invoice Number: \", <strong>{data.invoiceNumber}</strong>,\r\n            <br/>,\r\n            \"Registration user: \", <strong>{data.registrationUser.name} {data.registrationUser.surname}</strong>,\r\n            <br/>,\r\n        ]\r\n    }\r\n\r\n    const handleNewWaybillMessage = async (messageData, openActionToast) => {\r\n        let response = await loadWaybillNotificationData(messageData.waybillId);\r\n        let formatData = convertToStringAndFormat(response.data);\r\n        openActionToast(TOAST_TITLE, formatData, () => openWaybillDialog(messageData.waybillId))\r\n    }\r\n\r\n    return [WaybillDialogComponent, handleNewWaybillMessage]\r\n}"]},"metadata":{},"sourceType":"module"}