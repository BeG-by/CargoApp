{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\projects\\\\cargo_app\\\\frontend\\\\src\\\\components\\\\parts\\\\layout\\\\header.js\";\n\nimport clsx from \"clsx\";\nimport React, { useEffect } from \"react\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { SignoutButton } from \"../buttons/signout-button\";\nimport { SigninButton } from \"../buttons/signin-button\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { changeUserAndCompany } from \"../../store/actions\";\nimport { Link } from \"react-router-dom\";\nimport \"../../App.css\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport photo from \"../../../resources/images/user_no_photo.png\";\nimport { handleRequestError, makeRequest, USER_URL } from \"../util/request-util\";\nimport useToast from \"../toast-notification/useToast\";\nvar drawerWidth = 240;\nvar useStyles = makeStyles(function (theme) {\n  var _title, _welcome;\n\n  return {\n    appBar: {\n      minWidth: '250px',\n      transition: theme.transitions.create(['margin', 'width'], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen\n      })\n    },\n    appBarShift: {\n      width: \"calc(100% - \" + drawerWidth + \"px)\",\n      marginLeft: drawerWidth,\n      transition: theme.transitions.create(['margin', 'width'], {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.enteringScreen\n      })\n    },\n    grow: {\n      flexGrow: 1\n    },\n    menuButton: {\n      marginRight: theme.spacing(2)\n    },\n    title: (_title = {}, _defineProperty(_title, theme.breakpoints.up('sm'), {\n      display: 'flex'\n    }), _defineProperty(_title, \"textShadow\", '1px 1px 2px black'), _title),\n    welcome: (_welcome = {\n      position: 'relative',\n      display: 'none'\n    }, _defineProperty(_welcome, theme.breakpoints.up('md'), {\n      display: 'flex'\n    }), _defineProperty(_welcome, \"marginRight\", theme.spacing(2)), _defineProperty(_welcome, \"fontSize\", '18px'), _defineProperty(_welcome, \"fontStyle\", 'oblique'), _welcome),\n    hide: {\n      display: 'none'\n    },\n    spaceAround: {\n      marginRight: 20\n    }\n  };\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    user: store.user,\n    company: store.company\n  };\n};\n\nvar mapActionsToProps = function mapActionsToProps(dispatch) {\n  return {\n    changeUserAndCompany: bindActionCreators(changeUserAndCompany, dispatch)\n  };\n};\n\nexport var Header = connect(mapStateToProps, mapActionsToProps)(function (props) {\n  var user = props.user,\n      company = props.company;\n  var isAuthenticate = localStorage.getItem(\"authorization\") !== null;\n  var headerText = \"Manage your cargo with convenient digital tools\";\n  var headerCompany = \"CARGO APP\";\n  var classes = useStyles();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      openDialog = _React$useState2[0],\n      setOpenDialog = _React$useState2[1];\n\n  var _useToast = useToast(),\n      _useToast2 = _slicedToArray(_useToast, 2),\n      toast = _useToast2[0],\n      showToast = _useToast2[1];\n\n  var getUserInfo = function getUserInfo() {\n    var response, _user, clientCompany;\n\n    return _regeneratorRuntime.async(function getUserInfo$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(makeRequest(\"GET\", USER_URL + \"/info\"));\n\n          case 3:\n            response = _context.sent;\n            _user = response.data.user;\n            clientCompany = response.data.company;\n            props.changeUserAndCompany(_user, clientCompany);\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            handleRequestError(_context.t0, showToast);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  useEffect(function () {\n    if (isAuthenticate) {\n      getUserInfo();\n    }\n  }, []);\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpenDialog(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpenDialog(false);\n  };\n\n  var renderUserName = function renderUserName() {\n    var userText = !user.name || !user.surname ? headerText : user.name + \" \" + user.surname + \", \" + user.roles;\n    return isAuthenticate ? userText : headerText;\n  };\n\n  var renderUserPhoto = function renderUserPhoto() {\n    return isAuthenticate ? React.createElement(Link, {\n      to: \"/profile\",\n      className: \"link-item-white header-link\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, React.createElement(Avatar, {\n      alt: \"avatar\",\n      className: classes.spaceAround,\n      src: user.photo !== undefined && user.photo !== null && user.photo.trim() ? user.photo : photo,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    })) : null;\n  };\n\n  var renderCompanyName = function renderCompanyName() {\n    var companyName = company.name ? company.name : headerCompany;\n    return isAuthenticate ? React.createElement(Link, {\n      to: \"/main\",\n      className: \"link-item-white\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }, companyName) : headerCompany;\n  };\n\n  var LoginButton = function LoginButton() {\n    return isAuthenticate ? React.createElement(SignoutButton, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }) : React.createElement(SigninButton, {\n      openDialog: openDialog,\n      handleClickOpen: handleClickOpen,\n      handleClose: handleClose,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    });\n  };\n\n  return React.createElement(AppBar, {\n    className: clsx(classes.appBar, _defineProperty({}, classes.appBarShift, props.openMenu)),\n    position: \"fixed\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, React.createElement(Toolbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, React.createElement(IconButton, {\n    edge: \"start\",\n    onClick: props.handleDrawerOpen,\n    className: clsx(classes.menuButton, props.openMenu && classes.hide),\n    color: \"inherit\",\n    \"aria-label\": \"open drawer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, React.createElement(MenuIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  })), React.createElement(Typography, {\n    className: classes.title,\n    variant: \"h6\",\n    noWrap: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, renderCompanyName()), React.createElement(\"div\", {\n    className: classes.grow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }), React.createElement(Typography, {\n    className: classes.welcome,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, renderUserName()), React.createElement(\"div\", {\n    className: classes.grow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }), React.createElement(\"div\", {\n    className: classes.spaceAround,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, renderUserPhoto()), React.createElement(LoginButton, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  })), toast);\n});","map":{"version":3,"sources":["D:/projects/cargo_app/frontend/src/components/parts/layout/header.js"],"names":["clsx","React","useEffect","AppBar","Toolbar","IconButton","MenuIcon","Typography","makeStyles","SignoutButton","SigninButton","connect","bindActionCreators","changeUserAndCompany","Link","Avatar","photo","handleRequestError","makeRequest","USER_URL","useToast","drawerWidth","useStyles","theme","appBar","minWidth","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","width","marginLeft","easeOut","enteringScreen","grow","flexGrow","menuButton","marginRight","spacing","title","breakpoints","up","display","welcome","position","hide","spaceAround","mapStateToProps","store","user","company","mapActionsToProps","dispatch","Header","props","isAuthenticate","localStorage","getItem","headerText","headerCompany","classes","useState","openDialog","setOpenDialog","toast","showToast","getUserInfo","response","data","clientCompany","handleClickOpen","handleClose","renderUserName","userText","name","surname","roles","renderUserPhoto","undefined","trim","renderCompanyName","companyName","LoginButton","openMenu","handleDrawerOpen"],"mappings":";;;;;;;AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,SAAQC,UAAR,QAAyB,0BAAzB;AACA,SAAQC,aAAR;AACA,SAAQC,YAAR;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,kBAAR,QAAiC,OAAjC;AACA,SAAQC,oBAAR;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP;AACA,SAAQC,kBAAR,EAA4BC,WAA5B,EAAyCC,QAAzC;AACA,OAAOC,QAAP;AAEA,IAAMC,WAAW,GAAG,GAApB;AAEA,IAAMC,SAAS,GAAGd,UAAU,CAAC,UAACe,KAAD;AAAA;;AAAA,SAAY;AACrCC,IAAAA,MAAM,EAAE;AACJC,MAAAA,QAAQ,EAAE,OADN;AAEJC,MAAAA,UAAU,EAAEH,KAAK,CAACI,WAAN,CAAkBC,MAAlB,CAAyB,CAAC,QAAD,EAAW,OAAX,CAAzB,EAA8C;AACtDC,QAAAA,MAAM,EAAEN,KAAK,CAACI,WAAN,CAAkBE,MAAlB,CAAyBC,KADqB;AAEtDC,QAAAA,QAAQ,EAAER,KAAK,CAACI,WAAN,CAAkBI,QAAlB,CAA2BC;AAFiB,OAA9C;AAFR,KAD6B;AAQrCC,IAAAA,WAAW,EAAE;AACTC,MAAAA,KAAK,mBAAiBb,WAAjB,QADI;AAETc,MAAAA,UAAU,EAAEd,WAFH;AAGTK,MAAAA,UAAU,EAAEH,KAAK,CAACI,WAAN,CAAkBC,MAAlB,CAAyB,CAAC,QAAD,EAAW,OAAX,CAAzB,EAA8C;AACtDC,QAAAA,MAAM,EAAEN,KAAK,CAACI,WAAN,CAAkBE,MAAlB,CAAyBO,OADqB;AAEtDL,QAAAA,QAAQ,EAAER,KAAK,CAACI,WAAN,CAAkBI,QAAlB,CAA2BM;AAFiB,OAA9C;AAHH,KARwB;AAgBrCC,IAAAA,IAAI,EAAE;AACFC,MAAAA,QAAQ,EAAE;AADR,KAhB+B;AAmBrCC,IAAAA,UAAU,EAAE;AACRC,MAAAA,WAAW,EAAElB,KAAK,CAACmB,OAAN,CAAc,CAAd;AADL,KAnByB;AAsBrCC,IAAAA,KAAK,wCACApB,KAAK,CAACqB,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CADA,EAC6B;AAC1BC,MAAAA,OAAO,EAAE;AADiB,KAD7B,yCAIW,mBAJX,UAtBgC;AA4BrCC,IAAAA,OAAO;AACHC,MAAAA,QAAQ,EAAE,UADP;AAEHF,MAAAA,OAAO,EAAE;AAFN,iCAGFvB,KAAK,CAACqB,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CAHE,EAG2B;AAC1BC,MAAAA,OAAO,EAAE;AADiB,KAH3B,4CAMUvB,KAAK,CAACmB,OAAN,CAAc,CAAd,CANV,yCAOO,MAPP,0CAQQ,SARR,YA5B8B;AAsCrCO,IAAAA,IAAI,EAAE;AACFH,MAAAA,OAAO,EAAE;AADP,KAtC+B;AAyCrCI,IAAAA,WAAW,EAAE;AACTT,MAAAA,WAAW,EAAE;AADJ;AAzCwB,GAAZ;AAAA,CAAD,CAA5B;;AA8CA,IAAMU,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AAC/B,SAAO;AACHC,IAAAA,IAAI,EAAED,KAAK,CAACC,IADT;AAEHC,IAAAA,OAAO,EAAEF,KAAK,CAACE;AAFZ,GAAP;AAIH,CALD;;AAOA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,QAAD,EAAc;AACpC,SAAO;AACH3C,IAAAA,oBAAoB,EAAED,kBAAkB,CAACC,oBAAD,EAAuB2C,QAAvB;AADrC,GAAP;AAGH,CAJD;;AAMA,OAAO,IAAMC,MAAM,GAAG9C,OAAO,CAACwC,eAAD,EAAkBI,iBAAlB,CAAP,CAA4C,UAACG,KAAD,EAAW;AAAA,MAElEL,IAFkE,GAEjDK,KAFiD,CAElEL,IAFkE;AAAA,MAE5DC,OAF4D,GAEjDI,KAFiD,CAE5DJ,OAF4D;AAGzE,MAAMK,cAAc,GAAGC,YAAY,CAACC,OAAb,CAAqB,eAArB,MAA0C,IAAjE;AACA,MAAMC,UAAU,GAAG,iDAAnB;AACA,MAAMC,aAAa,GAAG,WAAtB;AACA,MAAMC,OAAO,GAAG1C,SAAS,EAAzB;;AANyE,wBAOrCrB,KAAK,CAACgE,QAAN,CAAe,KAAf,CAPqC;AAAA;AAAA,MAOlEC,UAPkE;AAAA,MAOtDC,aAPsD;;AAAA,kBAQ7C/C,QAAQ,EARqC;AAAA;AAAA,MAQlEgD,KARkE;AAAA,MAQ1DC,SAR0D;;AAUzE,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEWpD,WAAW,CAAC,KAAD,EAAQC,QAAQ,GAAG,OAAnB,CAFtB;;AAAA;AAENoD,YAAAA,QAFM;AAGNlB,YAAAA,KAHM,GAGCkB,QAAQ,CAACC,IAAT,CAAcnB,IAHf;AAINoB,YAAAA,aAJM,GAIUF,QAAQ,CAACC,IAAT,CAAclB,OAJxB;AAKZI,YAAAA,KAAK,CAAC7C,oBAAN,CAA2BwC,KAA3B,EAAiCoB,aAAjC;AALY;AAAA;;AAAA;AAAA;AAAA;AAOZxD,YAAAA,kBAAkB,cAAQoD,SAAR,CAAlB;;AAPY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAWAnE,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIyD,cAAJ,EAAoB;AAChBW,MAAAA,WAAW;AACd;AACJ,GAJQ,EAIN,EAJM,CAAT;;AAMA,MAAMI,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC1BP,IAAAA,aAAa,CAAC,IAAD,CAAb;AACH,GAFD;;AAIA,MAAMQ,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtBR,IAAAA,aAAa,CAAC,KAAD,CAAb;AACH,GAFD;;AAIA,MAAMS,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AACzB,QAAMC,QAAQ,GAAG,CAACxB,IAAI,CAACyB,IAAN,IAAc,CAACzB,IAAI,CAAC0B,OAApB,GACXjB,UADW,GAEXT,IAAI,CAACyB,IAAL,GAAY,GAAZ,GAAkBzB,IAAI,CAAC0B,OAAvB,GAAiC,IAAjC,GAAwC1B,IAAI,CAAC2B,KAFnD;AAGA,WAAOrB,cAAc,GAAGkB,QAAH,GAAcf,UAAnC;AACH,GALD;;AAOA,MAAMmB,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC1B,WAAOtB,cAAc,GACf,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAE,UAAV;AACM,MAAA,SAAS,EAAC,6BADhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,MAAD;AAAQ,MAAA,GAAG,EAAC,QAAZ;AACQ,MAAA,SAAS,EAAEK,OAAO,CAACd,WAD3B;AAEQ,MAAA,GAAG,EACCG,IAAI,CAACrC,KAAL,KAAekE,SAAf,IACG7B,IAAI,CAACrC,KAAL,KAAe,IADlB,IAEGqC,IAAI,CAACrC,KAAL,CAAWmE,IAAX,EAFH,GAGM9B,IAAI,CAACrC,KAHX,GAIMA,KAPlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADe,GAcf,IAdN;AAeH,GAhBD;;AAkBA,MAAMoE,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC5B,QAAMC,WAAW,GAAG/B,OAAO,CAACwB,IAAR,GAAexB,OAAO,CAACwB,IAAvB,GAA8Bf,aAAlD;AACA,WAAOJ,cAAc,GACf,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAE,OAAV;AAAmB,MAAA,SAAS,EAAC,iBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgD0B,WAAhD,CADe,GAEftB,aAFN;AAGH,GALD;;AAQA,MAAMuB,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtB,WAAO3B,cAAc,GACf,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADe,GAEf,oBAAC,YAAD;AAAc,MAAA,UAAU,EAAEO,UAA1B;AACc,MAAA,eAAe,EAAEQ,eAD/B;AAEc,MAAA,WAAW,EAAEC,WAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFN;AAKH,GAND;;AAQA,SACI,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAE3E,IAAI,CAACgE,OAAO,CAACxC,MAAT,sBAClBwC,OAAO,CAAC/B,WADU,EACIyB,KAAK,CAAC6B,QADV,EAAvB;AAGQ,IAAA,QAAQ,EAAC,OAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAII,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,UAAD;AACI,IAAA,IAAI,EAAC,OADT;AAEI,IAAA,OAAO,EAAE7B,KAAK,CAAC8B,gBAFnB;AAGI,IAAA,SAAS,EAAExF,IAAI,CAACgE,OAAO,CAACxB,UAAT,EAAqBkB,KAAK,CAAC6B,QAAN,IAAkBvB,OAAO,CAACf,IAA/C,CAHnB;AAII,IAAA,KAAK,EAAC,SAJV;AAKI,kBAAW,aALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,CADJ,EAUI,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAEe,OAAO,CAACrB,KAA/B;AAAsC,IAAA,OAAO,EAAC,IAA9C;AAAmD,IAAA,MAAM,MAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKyC,iBAAiB,EADtB,CAVJ,EAaI;AAAK,IAAA,SAAS,EAAEpB,OAAO,CAAC1B,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbJ,EAcI,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAE0B,OAAO,CAACjB,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK6B,cAAc,EADnB,CAdJ,EAiBI;AAAK,IAAA,SAAS,EAAEZ,OAAO,CAAC1B,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBJ,EAkBI;AAAK,IAAA,SAAS,EAAE0B,OAAO,CAACd,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK+B,eAAe,EADpB,CAlBJ,EAqBI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArBJ,CAJJ,EA2BKb,KA3BL,CADJ;AA+BH,CA3GqB,CAAf","sourcesContent":["import clsx from \"clsx\";\r\nimport React, {useEffect} from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport {SignoutButton} from \"../buttons/signout-button\";\r\nimport {SigninButton} from \"../buttons/signin-button\";\r\nimport {connect} from \"react-redux\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {changeUserAndCompany} from \"../../store/actions\";\r\nimport {Link} from \"react-router-dom\";\r\nimport \"../../App.css\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport photo from \"../../../resources/images/user_no_photo.png\";\r\nimport {handleRequestError, makeRequest, USER_URL} from \"../util/request-util\";\r\nimport useToast from \"../toast-notification/useToast\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\r\n        minWidth: '250px',\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    grow: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'flex',\r\n        },\r\n        textShadow: '1px 1px 2px black',\r\n    },\r\n    welcome: {\r\n        position: 'relative',\r\n        display: 'none',\r\n        [theme.breakpoints.up('md')]: {\r\n            display: 'flex',\r\n        },\r\n        marginRight: theme.spacing(2),\r\n        fontSize: '18px',\r\n        fontStyle: 'oblique',\r\n    },\r\n    hide: {\r\n        display: 'none',\r\n    },\r\n    spaceAround: {\r\n        marginRight: 20\r\n    }\r\n}));\r\n\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        user: store.user,\r\n        company: store.company\r\n    }\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n    return {\r\n        changeUserAndCompany: bindActionCreators(changeUserAndCompany, dispatch)\r\n    }\r\n};\r\n\r\nexport const Header = connect(mapStateToProps, mapActionsToProps)((props) => {\r\n\r\n    const {user, company} = props;\r\n    const isAuthenticate = localStorage.getItem(\"authorization\") !== null;\r\n    const headerText = \"Manage your cargo with convenient digital tools\";\r\n    const headerCompany = \"CARGO APP\";\r\n    const classes = useStyles();\r\n    const [openDialog, setOpenDialog] = React.useState(false);\r\n    const [toast , showToast] = useToast();\r\n\r\n    const getUserInfo = async () => {\r\n        try {\r\n            const response = await makeRequest(\"GET\", USER_URL + \"/info\");\r\n            const user = response.data.user;\r\n            const clientCompany = response.data.company;\r\n            props.changeUserAndCompany(user, clientCompany);\r\n        } catch (error) {\r\n            handleRequestError(error, showToast);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isAuthenticate) {\r\n            getUserInfo();\r\n        }\r\n    }, []);\r\n\r\n    const handleClickOpen = () => {\r\n        setOpenDialog(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpenDialog(false);\r\n    };\r\n\r\n    const renderUserName = () => {\r\n        const userText = !user.name || !user.surname\r\n            ? headerText\r\n            : user.name + \" \" + user.surname + \", \" + user.roles;\r\n        return isAuthenticate ? userText : headerText\r\n    };\r\n\r\n    const renderUserPhoto = () => {\r\n        return isAuthenticate\r\n            ? <Link to={\"/profile\"}\r\n                    className=\"link-item-white header-link\">\r\n                <Avatar alt=\"avatar\"\r\n                        className={classes.spaceAround}\r\n                        src={\r\n                            user.photo !== undefined\r\n                            && user.photo !== null\r\n                            && user.photo.trim()\r\n                                ? user.photo\r\n                                : photo\r\n                        }\r\n                />\r\n            </Link>\r\n            : null;\r\n    }\r\n\r\n    const renderCompanyName = () => {\r\n        const companyName = company.name ? company.name : headerCompany;\r\n        return isAuthenticate\r\n            ? <Link to={\"/main\"} className=\"link-item-white\">{companyName}</Link>\r\n            : headerCompany\r\n    };\r\n\r\n\r\n    const LoginButton = () => {\r\n        return isAuthenticate\r\n            ? <SignoutButton/>\r\n            : <SigninButton openDialog={openDialog}\r\n                            handleClickOpen={handleClickOpen}\r\n                            handleClose={handleClose}/>;\r\n    };\r\n\r\n    return (\r\n        <AppBar className={clsx(classes.appBar, {\r\n            [classes.appBarShift]: props.openMenu,\r\n        })}\r\n                position=\"fixed\">\r\n            <Toolbar>\r\n                <IconButton\r\n                    edge=\"start\"\r\n                    onClick={props.handleDrawerOpen}\r\n                    className={clsx(classes.menuButton, props.openMenu && classes.hide)}\r\n                    color=\"inherit\"\r\n                    aria-label=\"open drawer\"\r\n                >\r\n                    <MenuIcon/>\r\n                </IconButton>\r\n                <Typography className={classes.title} variant=\"h6\" noWrap>\r\n                    {renderCompanyName()}\r\n                </Typography>\r\n                <div className={classes.grow}/>\r\n                <Typography className={classes.welcome}>\r\n                    {renderUserName()}\r\n                </Typography>\r\n                <div className={classes.grow}/>\r\n                <div className={classes.spaceAround}>\r\n                    {renderUserPhoto()}\r\n                </div>\r\n                <LoginButton/>\r\n            </Toolbar>\r\n            {toast}\r\n        </AppBar>\r\n    );\r\n});\r\n"]},"metadata":{},"sourceType":"module"}