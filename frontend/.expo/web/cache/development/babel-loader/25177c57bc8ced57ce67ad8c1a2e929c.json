{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\projects\\\\cargo_app\\\\frontend\\\\src\\\\components\\\\pages\\\\current-waybill-page.js\";\n\nimport React, { useEffect } from \"react\";\nimport { handleRequestError, makeRequest, WAYBILL_URL } from \"../parts/util/request-util\";\nimport { WaybillInfo } from \"../roles/driver/waybill-info\";\nexport var CurrentWaybillBody = function CurrentWaybillBody() {\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      current = _React$useState2[0],\n      setCurrent = _React$useState2[1];\n\n  function fetchCurrent(cleanupFunction) {\n    var response;\n    return _regeneratorRuntime.async(function fetchCurrent$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (cleanupFunction) {\n              _context.next = 5;\n              break;\n            }\n\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(makeRequest(\"GET\", WAYBILL_URL + \"/current\"));\n\n          case 3:\n            response = _context.sent;\n            setCurrent(response.data);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  useEffect(function () {\n    var cleanupFunction = false;\n    fetchCurrent(cleanupFunction).catch(function (err) {\n      setCurrent({});\n      handleRequestError(err, alert);\n    });\n    return function () {\n      return cleanupFunction = true;\n    };\n  }, []);\n  return current.id === null || current.id === undefined ? React.createElement(\"main\", {\n    className: \"main-body-field\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }\n  }, React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 17\n    }\n  }, \"Actually, you don't have any current waybill for work. Drink a cup of cappuccino.\")) : React.createElement(\"main\", {\n    className: \"main-body-field\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }\n  }, React.createElement(WaybillInfo, {\n    waybillId: current.id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 17\n    }\n  }));\n};\nexport default CurrentWaybillBody;","map":{"version":3,"sources":["D:/projects/cargo_app/frontend/src/components/pages/current-waybill-page.js"],"names":["React","useEffect","handleRequestError","makeRequest","WAYBILL_URL","WaybillInfo","CurrentWaybillBody","useState","current","setCurrent","fetchCurrent","cleanupFunction","response","data","catch","err","alert","id","undefined"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,kBAAR,EAA4BC,WAA5B,EAAyCC,WAAzC;AACA,SAAQC,WAAR;AAEA,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAAA,wBACNN,KAAK,CAACO,QAAN,CAAe,EAAf,CADM;AAAA;AAAA,MAC7BC,OAD6B;AAAA,MACpBC,UADoB;;AAGpC,WAAeC,YAAf,CAA4BC,eAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACSA,eADT;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAE6BR,WAAW,CAAC,KAAD,EAAQC,WAAW,GAAG,UAAtB,CAFxC;;AAAA;AAEYQ,YAAAA,QAFZ;AAGQH,YAAAA,UAAU,CAACG,QAAQ,CAACC,IAAV,CAAV;;AAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOAZ,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIU,eAAe,GAAG,KAAtB;AACAD,IAAAA,YAAY,CAACC,eAAD,CAAZ,CACKG,KADL,CACW,UAACC,GAAD,EAAS;AACZN,MAAAA,UAAU,CAAC,EAAD,CAAV;AACAP,MAAAA,kBAAkB,CAACa,GAAD,EAAMC,KAAN,CAAlB;AACH,KAJL;AAKA,WAAO;AAAA,aAAML,eAAe,GAAG,IAAxB;AAAA,KAAP;AACH,GARQ,EAQN,EARM,CAAT;AAUA,SACIH,OAAO,CAACS,EAAR,KAAe,IAAf,IAAuBT,OAAO,CAACS,EAAR,KAAeC,SAAtC,GACI;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yFADJ,CADJ,GAOI;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAEV,OAAO,CAACS,EAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CARR;AAYH,CAhCM;AAkCP,eAAeX,kBAAf","sourcesContent":["import React, {useEffect} from \"react\";\r\nimport {handleRequestError, makeRequest, WAYBILL_URL} from \"../parts/util/request-util\";\r\nimport {WaybillInfo} from \"../roles/driver/waybill-info\";\r\n\r\nexport const CurrentWaybillBody = () => {\r\n    const [current, setCurrent] = React.useState({});\r\n\r\n    async function fetchCurrent(cleanupFunction) {\r\n        if (!cleanupFunction) {\r\n            let response = await makeRequest(\"GET\", WAYBILL_URL + \"/current\");\r\n            setCurrent(response.data);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        let cleanupFunction = false;\r\n        fetchCurrent(cleanupFunction)\r\n            .catch((err) => {\r\n                setCurrent({});\r\n                handleRequestError(err, alert); // TODO notification\r\n            });\r\n        return () => cleanupFunction = true;\r\n    }, []);\r\n\r\n    return (\r\n        current.id === null || current.id === undefined ?\r\n            <main className=\"main-body-field\">\r\n                <h2>\r\n                    Actually, you don't have any current waybill for work. Drink a cup of cappuccino.\r\n                </h2>\r\n            </main>\r\n            :\r\n            <main className=\"main-body-field\">\r\n                <WaybillInfo waybillId={current.id}/>\r\n            </main>\r\n    )\r\n}\r\n\r\nexport default CurrentWaybillBody;"]},"metadata":{},"sourceType":"module"}