{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\projects\\\\cargo_app\\\\frontend\\\\src\\\\web_socket\\\\hooks\\\\handlers\\\\use-invoice-update-message-handler.js\";\nimport React from \"react\";\nimport { INVOICE_NOTIFICATION_DATA_URL, makeRequest } from \"../../../components/parts/util/request-util\";\nimport useInvoiceConfirmationForm from \"../forms/use-invoice-confirmation-form\";\nvar TOAST_TITLE = \"Invoice was updated\";\nexport default function useInvoiceUpdateMessageHandler() {\n  var _this = this;\n\n  var _useInvoiceConfirmati = useInvoiceConfirmationForm(),\n      _useInvoiceConfirmati2 = _slicedToArray(_useInvoiceConfirmati, 2),\n      InvoiceConfirmationDialogComponent = _useInvoiceConfirmati2[0],\n      openInvoiceConfirmationDialogComponent = _useInvoiceConfirmati2[1];\n\n  var loadInvoiceNotificationData = function loadInvoiceNotificationData(invoiceId) {\n    return makeRequest(\"GET\", INVOICE_NOTIFICATION_DATA_URL + \"/\" + invoiceId);\n  };\n\n  var convertToStringAndFormat = function convertToStringAndFormat(invoiceNotificationData) {\n    var data = invoiceNotificationData;\n    return [\"Number: \", React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 25\n      }\n    }, data.number), React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 13\n      }\n    }), \"Driver: \", React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 25\n      }\n    }, data.driver.name, \" \", data.driver.surname), React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 13\n      }\n    }), \"Registered by: \", React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 32\n      }\n    }, data.registrationUser.name, \" \", data.registrationUser.surname), React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 13\n      }\n    }), \"Status: \", React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 25\n      }\n    }, data.status)];\n  };\n\n  var handleInvoiceUpdateMessage = function handleInvoiceUpdateMessage(messageData, openActionToast) {\n    var response, formatData;\n    return _regeneratorRuntime.async(function handleInvoiceUpdateMessage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(loadInvoiceNotificationData(messageData.invoiceId));\n\n          case 2:\n            response = _context.sent;\n            formatData = convertToStringAndFormat(response.data);\n            openActionToast(TOAST_TITLE, formatData, function () {\n              return openInvoiceConfirmationDialogComponent(messageData.invoiceId);\n            });\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return [InvoiceConfirmationDialogComponent, handleInvoiceUpdateMessage];\n}","map":{"version":3,"sources":["D:/projects/cargo_app/frontend/src/web_socket/hooks/handlers/use-invoice-update-message-handler.js"],"names":["React","INVOICE_NOTIFICATION_DATA_URL","makeRequest","useInvoiceConfirmationForm","TOAST_TITLE","useInvoiceUpdateMessageHandler","InvoiceConfirmationDialogComponent","openInvoiceConfirmationDialogComponent","loadInvoiceNotificationData","invoiceId","convertToStringAndFormat","invoiceNotificationData","data","number","driver","name","surname","registrationUser","status","handleInvoiceUpdateMessage","messageData","openActionToast","response","formatData"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,6BAAR,EAAuCC,WAAvC;AACA,OAAOC,0BAAP;AAEA,IAAMC,WAAW,GAAG,qBAApB;AAEA,eAAe,SAASC,8BAAT,GAA0C;AAAA;;AAAA,8BACgCF,0BAA0B,EAD1D;AAAA;AAAA,MAC9CG,kCAD8C;AAAA,MACVC,sCADU;;AAGrD,MAAMC,2BAA2B,GAAG,SAA9BA,2BAA8B,CAACC,SAAD,EAAe;AAC/C,WAAOP,WAAW,CAAC,KAAD,EAAQD,6BAA6B,GAAG,GAAhC,GAAsCQ,SAA9C,CAAlB;AACH,GAFD;;AAIA,MAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,uBAAD,EAA6B;AAC1D,QAAMC,IAAI,GAAGD,uBAAb;AACA,WAAO,CACH,UADG,EACS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAASC,IAAI,CAACC,MAAd,CADT,EAEH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFG,EAGH,UAHG,EAGS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAASD,IAAI,CAACE,MAAL,CAAYC,IAArB,OAA4BH,IAAI,CAACE,MAAL,CAAYE,OAAxC,CAHT,EAIH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJG,EAKH,iBALG,EAKgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAASJ,IAAI,CAACK,gBAAL,CAAsBF,IAA/B,OAAsCH,IAAI,CAACK,gBAAL,CAAsBD,OAA5D,CALhB,EAMH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANG,EAOH,UAPG,EAOS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAASJ,IAAI,CAACM,MAAd,CAPT,CAAP;AASH,GAXD;;AAaA,MAAMC,0BAA0B,GAAG,SAA7BA,0BAA6B,CAAOC,WAAP,EAAoBC,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACVb,2BAA2B,CAACY,WAAW,CAACX,SAAb,CADjB;;AAAA;AAC3Ba,YAAAA,QAD2B;AAE3BC,YAAAA,UAF2B,GAEdb,wBAAwB,CAACY,QAAQ,CAACV,IAAV,CAFV;AAG/BS,YAAAA,eAAe,CAACjB,WAAD,EAAcmB,UAAd,EAA0B;AAAA,qBAAMhB,sCAAsC,CAACa,WAAW,CAACX,SAAb,CAA5C;AAAA,aAA1B,CAAf;;AAH+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnC;;AAMA,SAAO,CAACH,kCAAD,EAAqCa,0BAArC,CAAP;AACH","sourcesContent":["import React from \"react\";\r\nimport {INVOICE_NOTIFICATION_DATA_URL, makeRequest} from \"../../../components/parts/util/request-util\";\r\nimport useInvoiceConfirmationForm from \"../forms/use-invoice-confirmation-form\";\r\n\r\nconst TOAST_TITLE = \"Invoice was updated\"\r\n\r\nexport default function useInvoiceUpdateMessageHandler() {\r\n    const [InvoiceConfirmationDialogComponent, openInvoiceConfirmationDialogComponent] = useInvoiceConfirmationForm();\r\n\r\n    const loadInvoiceNotificationData = (invoiceId) => {\r\n        return makeRequest(\"GET\", INVOICE_NOTIFICATION_DATA_URL + \"/\" + invoiceId);\r\n    }\r\n\r\n    const convertToStringAndFormat = (invoiceNotificationData) => {\r\n        const data = invoiceNotificationData;\r\n        return [\r\n            \"Number: \", <strong>{data.number}</strong>,\r\n            <br/>,\r\n            \"Driver: \", <strong>{data.driver.name} {data.driver.surname}</strong>,\r\n            <br/>,\r\n            \"Registered by: \", <strong>{data.registrationUser.name} {data.registrationUser.surname}</strong>,\r\n            <br/>,\r\n            \"Status: \", <strong>{data.status}</strong>,\r\n        ]\r\n    }\r\n\r\n    const handleInvoiceUpdateMessage = async (messageData, openActionToast) => {\r\n        let response = await loadInvoiceNotificationData(messageData.invoiceId);\r\n        let formatData = convertToStringAndFormat(response.data);\r\n        openActionToast(TOAST_TITLE, formatData, () => openInvoiceConfirmationDialogComponent(messageData.invoiceId))\r\n    }\r\n\r\n    return [InvoiceConfirmationDialogComponent, handleInvoiceUpdateMessage]\r\n}"]},"metadata":{},"sourceType":"module"}