{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\projects\\\\cargo_app\\\\frontend\\\\src\\\\components\\\\roles\\\\dispatcher\\\\products\\\\products-table.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Button from \"@material-ui/core/Button\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport fetchFieldFromObject from \"../../../parts/util/function-util\";\nimport EnhancedTableHead, { getComparator, stableSort } from \"../../../parts/util/sorted-table-head\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nvar MIN_WIDTH = 170;\nvar ALIGN = \"left\";\nvar FONT_SIZE = 12;\nvar columns = [{\n  label: \"Name\",\n  id: \"name\",\n  minWidth: 100,\n  maxWidth: 100,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  label: \"Mass\",\n  id: \"mass\",\n  minWidth: 80,\n  maxWidth: 80,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  label: \"Measure\",\n  id: \"massMeasure\",\n  minWidth: 80,\n  maxWidth: 80,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  label: \"Quantity\",\n  id: \"quantity\",\n  minWidth: 80,\n  maxWidth: 80,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  label: \"Measure\",\n  id: \"quantityMeasure\",\n  minWidth: 80,\n  maxWidth: 80,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  label: \"Price\",\n  id: \"price\",\n  minWidth: 80,\n  maxWidth: 80,\n  fontSize: FONT_SIZE\n}, {\n  label: \"Currency\",\n  id: \"currency\",\n  minWidth: 80,\n  maxWidth: 80,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  label: \"Sum\",\n  id: \"sum\",\n  minWidth: 80,\n  maxWidth: 80,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  id: \"editDelete\",\n  label: \"\",\n  minWidth: 60,\n  maxWidth: 60,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}];\nexport default (function (props) {\n  var onRowClick = props.onRowClick;\n  var products = props.products;\n  var changeTotal = props.onAddProduct;\n  var onRowDelete = props.onRowDelete;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      page = _useState2[0],\n      setPage = _useState2[1];\n\n  var _useState3 = useState(10),\n      _useState4 = _slicedToArray(_useState3, 2),\n      rowsPerPage = _useState4[0],\n      setRowsPerPage = _useState4[1];\n\n  var _useState5 = useState('asc'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      order = _useState6[0],\n      setOrder = _useState6[1];\n\n  var _useState7 = useState('status'),\n      _useState8 = _slicedToArray(_useState7, 2),\n      orderBy = _useState8[0],\n      setOrderBy = _useState8[1];\n\n  var TOTAL = {\n    BYN: 0,\n    USD: 0,\n    EURO: 0,\n    RUB: 0,\n    weight: 0,\n    quantity: 0\n  };\n\n  var handleRequestSort = function handleRequestSort(event, property) {\n    var isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  useEffect(function () {\n    changeTotal(TOTAL);\n  }, [props.products]);\n\n  var handleChangePage = function handleChangePage(event, newPage) {\n    setPage(newPage);\n  };\n\n  var handleTableRowClick = function handleTableRowClick(product) {\n    onRowClick(product);\n  };\n\n  var handleChangeRowsPerPage = function handleChangeRowsPerPage(event) {\n    setRowsPerPage(+event.target.value);\n    setPage(0);\n  };\n\n  var handleChangeTotal = function handleChangeTotal(price, currency, weight, measure, quantity) {\n    TOTAL[currency] = TOTAL[currency] + price;\n    TOTAL.quantity = TOTAL.quantity + quantity;\n\n    switch (measure) {\n      case \"KG\":\n        TOTAL.weight = TOTAL.weight + weight;\n        break;\n\n      case \"TON\":\n        TOTAL.weight = TOTAL.weight + 1000 * weight;\n    }\n  };\n\n  return React.createElement(Paper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, React.createElement(TableContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, React.createElement(Table, {\n    \"aria-label\": \"sticky table\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, React.createElement(EnhancedTableHead, {\n    columns: columns,\n    order: order,\n    orderBy: orderBy,\n    onRequestSort: handleRequestSort,\n    customClass: \"header-background\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }), React.createElement(TableBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, stableSort(products, getComparator(order, orderBy)).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(function (product) {\n    var sumRow = Number(product.quantity) * Number(product.price);\n    handleChangeTotal(sumRow, product.currency, Number(product.mass), product.massMeasure, Number(product.quantity));\n    return React.createElement(TableRow, {\n      onClick: function onClick() {\n        handleTableRowClick(product);\n      },\n      hover: true,\n      role: \"checkbox\",\n      tabIndex: -1,\n      key: product.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 37\n      }\n    }, columns.map(function (column) {\n      if (column.id === \"editDelete\") {\n        return React.createElement(TableCell, {\n          key: column.id,\n          align: column.align,\n          className: \"edit-delete-block\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 53\n          }\n        }, React.createElement(Tooltip, {\n          title: \"Click to edit product\",\n          arrow: true,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 57\n          }\n        }, React.createElement(Button, {\n          className: \"menu-table-btn\",\n          color: \"primary\",\n          startIcon: React.createElement(EditIcon, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 76\n            }\n          }),\n          onClick: function onClick(e) {\n            e.stopPropagation();\n            handleTableRowClick(product);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 61\n          }\n        })), React.createElement(Tooltip, {\n          title: \"Click to edit product\",\n          arrow: true,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 57\n          }\n        }, React.createElement(Button, {\n          className: \"menu-table-btn\",\n          onClick: function onClick(e) {\n            e.stopPropagation();\n            onRowDelete(product.id);\n          },\n          color: \"primary\",\n          startIcon: React.createElement(DeleteIcon, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 76\n            }\n          }),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 61\n          }\n        })));\n      }\n\n      var innerContent = column.id === \"sum\" ? sumRow : fetchFieldFromObject(product, column.id);\n      return React.createElement(TableCell, {\n        key: column.id,\n        align: column.align,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 49\n        }\n      }, innerContent);\n    }));\n  })))), React.createElement(TablePagination, {\n    rowsPerPageOptions: [10, 25, 100],\n    component: \"div\",\n    count: products.length,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    onChangePage: handleChangePage,\n    onChangeRowsPerPage: handleChangeRowsPerPage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }));\n});","map":{"version":3,"sources":["D:/projects/cargo_app/frontend/src/components/roles/dispatcher/products/products-table.js"],"names":["React","useEffect","useState","Paper","Table","TableBody","TableCell","TableContainer","TablePagination","TableRow","Button","EditIcon","DeleteIcon","fetchFieldFromObject","EnhancedTableHead","getComparator","stableSort","Tooltip","MIN_WIDTH","ALIGN","FONT_SIZE","columns","label","id","minWidth","maxWidth","align","fontSize","props","onRowClick","products","changeTotal","onAddProduct","onRowDelete","page","setPage","rowsPerPage","setRowsPerPage","order","setOrder","orderBy","setOrderBy","TOTAL","BYN","USD","EURO","RUB","weight","quantity","handleRequestSort","event","property","isAsc","handleChangePage","newPage","handleTableRowClick","product","handleChangeRowsPerPage","target","value","handleChangeTotal","price","currency","measure","slice","map","sumRow","Number","mass","massMeasure","column","e","stopPropagation","innerContent","length"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport fetchFieldFromObject from \"../../../parts/util/function-util\";\r\nimport EnhancedTableHead, {getComparator, stableSort} from \"../../../parts/util/sorted-table-head\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\n\r\nconst MIN_WIDTH = 170;\r\nconst ALIGN = \"left\";\r\nconst FONT_SIZE = 12;\r\n\r\n\r\nconst columns = [\r\n    {label: \"Name\", id: \"name\", minWidth: 100, maxWidth: 100, align: ALIGN, fontSize: FONT_SIZE},\r\n    {label: \"Mass\", id: \"mass\", minWidth: 80, maxWidth: 80, align: ALIGN, fontSize: FONT_SIZE},\r\n    {label: \"Measure\", id: \"massMeasure\", minWidth: 80, maxWidth: 80, align: ALIGN, fontSize: FONT_SIZE},\r\n    {label: \"Quantity\", id: \"quantity\", minWidth: 80, maxWidth: 80, align: ALIGN, fontSize: FONT_SIZE},\r\n    {label: \"Measure\", id: \"quantityMeasure\", minWidth: 80, maxWidth: 80, align: ALIGN, fontSize: FONT_SIZE},\r\n    {label: \"Price\", id: \"price\", minWidth: 80, maxWidth: 80, fontSize: FONT_SIZE},\r\n    {label: \"Currency\", id: \"currency\", minWidth: 80, maxWidth: 80, align: ALIGN, fontSize: FONT_SIZE},\r\n    {label: \"Sum\", id: \"sum\", minWidth: 80, maxWidth: 80, align: ALIGN, fontSize: FONT_SIZE},\r\n    {id: \"editDelete\", label: \"\", minWidth: 60, maxWidth: 60, align: ALIGN, fontSize: FONT_SIZE}\r\n];\r\n\r\n\r\nexport default (props) => {\r\n    const onRowClick = props.onRowClick;\r\n    const products = props.products;\r\n    const changeTotal = props.onAddProduct;\r\n    const {onRowDelete} = props;\r\n\r\n    const [page, setPage] = useState(0);\r\n    const [rowsPerPage, setRowsPerPage] = useState(10);\r\n    const [order, setOrder] = useState('asc');\r\n    const [orderBy, setOrderBy] = useState('status');\r\n\r\n    const TOTAL = {\r\n        BYN: 0,\r\n        USD: 0,\r\n        EURO: 0,\r\n        RUB: 0,\r\n        weight: 0,\r\n        quantity: 0\r\n    };\r\n\r\n    const handleRequestSort = (event, property) => {\r\n        const isAsc = orderBy === property && order === 'asc';\r\n        setOrder(isAsc ? 'desc' : 'asc');\r\n        setOrderBy(property);\r\n    };\r\n\r\n    useEffect(() => {\r\n        changeTotal(TOTAL);\r\n    }, [props.products]);\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        setPage(newPage);\r\n    };\r\n\r\n    const handleTableRowClick = (product) => {\r\n        onRowClick(product);\r\n    };\r\n\r\n    const handleChangeRowsPerPage = (event) => {\r\n        setRowsPerPage(+event.target.value);\r\n        setPage(0);\r\n    };\r\n\r\n    const handleChangeTotal = (price, currency, weight, measure, quantity) => {\r\n        TOTAL[currency] = TOTAL[currency] + price;\r\n        TOTAL.quantity = TOTAL.quantity + quantity;\r\n\r\n        switch (measure) {\r\n            case \"KG\":\r\n                TOTAL.weight = TOTAL.weight + weight;\r\n                break;\r\n            case \"TON\":\r\n                TOTAL.weight = TOTAL.weight + 1000 * weight;\r\n        }\r\n\r\n    };\r\n\r\n    return (\r\n        <Paper>\r\n            <TableContainer>\r\n                <Table aria-label=\"sticky table\">\r\n                    <EnhancedTableHead\r\n                        columns={columns}\r\n                        order={order}\r\n                        orderBy={orderBy}\r\n                        onRequestSort={handleRequestSort}\r\n                        customClass={\"header-background\"}\r\n                    />\r\n                    <TableBody>\r\n                        {stableSort(products, getComparator(order, orderBy))\r\n                            .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                            .map((product) => {\r\n\r\n                                const sumRow = Number(product.quantity) * Number(product.price);\r\n                                handleChangeTotal(sumRow, product.currency, Number(product.mass), product.massMeasure, Number(product.quantity));\r\n\r\n                                return (\r\n                                    <TableRow\r\n                                        onClick={() => {\r\n                                            handleTableRowClick(product);\r\n                                        }}\r\n                                        hover\r\n                                        role=\"checkbox\"\r\n                                        tabIndex={-1}\r\n                                        key={product.id}\r\n                                    >\r\n                                        {columns.map((column) => {\r\n\r\n                                            if (column.id === \"editDelete\") {\r\n                                                return (\r\n                                                    <TableCell key={column.id} align={column.align}\r\n                                                               className=\"edit-delete-block\">\r\n                                                        <Tooltip title=\"Click to edit product\" arrow>\r\n                                                            <Button\r\n                                                                className=\"menu-table-btn\"\r\n                                                                color={\"primary\"}\r\n                                                                startIcon={<EditIcon/>}\r\n                                                                onClick={(e) => {\r\n                                                                    e.stopPropagation();\r\n                                                                    handleTableRowClick(product)\r\n                                                                }}/>\r\n                                                        </Tooltip>\r\n\r\n                                                        <Tooltip title=\"Click to edit product\" arrow>\r\n                                                            <Button\r\n                                                                className=\"menu-table-btn\"\r\n                                                                onClick={(e) => {\r\n                                                                    e.stopPropagation();\r\n                                                                    onRowDelete(product.id);\r\n                                                                }} color=\"primary\"\r\n                                                                startIcon={<DeleteIcon/>}\r\n                                                            />\r\n                                                        </Tooltip>\r\n\r\n\r\n                                                    </TableCell>\r\n                                                );\r\n                                            }\r\n\r\n                                            let innerContent = column.id === \"sum\" ?\r\n                                                sumRow :\r\n                                                fetchFieldFromObject(product, column.id);\r\n\r\n                                            return (\r\n                                                <TableCell key={column.id} align={column.align}>\r\n                                                    {innerContent}\r\n                                                </TableCell>\r\n                                            );\r\n                                        })}\r\n                                    </TableRow>\r\n                                );\r\n                            })}\r\n\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n\r\n            <TablePagination\r\n                rowsPerPageOptions={[10, 25, 100]}\r\n                component=\"div\"\r\n                count={products.length}\r\n                rowsPerPage={rowsPerPage}\r\n                page={page}\r\n                onChangePage={handleChangePage}\r\n                onChangeRowsPerPage={handleChangeRowsPerPage}\r\n            />\r\n        </Paper>\r\n    );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}