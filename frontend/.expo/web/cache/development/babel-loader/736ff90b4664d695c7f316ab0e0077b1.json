{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\projects\\\\cargo_app\\\\frontend\\\\src\\\\components\\\\roles\\\\dispatcher\\\\storages\\\\storages-table.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport useToast from \"../../../parts/toast-notification/useToast\";\nimport Button from \"@material-ui/core/Button\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport { handleRequestError, makeRequest, STORAGE_URL } from \"../../../parts/util/request-util\";\nimport ConfirmDeletingDialog from \"../../admin/slide-dialog\";\nimport { StorageDialog } from \"./storage-dialog\";\nimport { Typography } from \"@material-ui/core\";\nimport LibraryAddRoundedIcon from \"@material-ui/icons/LibraryAddRounded\";\nimport { connect } from \"react-redux\";\nimport LibraryBooksIcon from \"@material-ui/icons/LibraryBooks\";\nimport \"../styles/storage-form.css\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport EnhancedTableHead, { getComparator, stableSort } from \"../../../parts/util/sorted-table-head\";\nimport { getSimplePropertiesFromObject } from \"../../../parts/util/function-util\";\nvar MIN_WIDTH = 170;\nvar ALIGN = \"left\";\nvar FONT_SIZE = 18;\nvar columns = [{\n  id: \"country\",\n  label: \"Country\",\n  minWidth: MIN_WIDTH,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  id: \"city\",\n  label: \"City\",\n  minWidth: MIN_WIDTH,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  id: \"street\",\n  label: \"Street\",\n  minWidth: MIN_WIDTH,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  id: \"house\",\n  label: \"House\",\n  minWidth: MIN_WIDTH,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  id: \"email\",\n  label: \"Email\",\n  minWidth: MIN_WIDTH,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  id: \"phone\",\n  label: \"Phone\",\n  minWidth: 140,\n  align: ALIGN,\n  fontSize: FONT_SIZE\n}, {\n  id: \"edit_delete\",\n  align: \"right\"\n}];\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    role: store.user.roles[0]\n  };\n};\n\nexport var StorageTable = connect(mapStateToProps)(function (props) {\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      page = _useState2[0],\n      setPage = _useState2[1];\n\n  var _useState3 = useState(10),\n      _useState4 = _slicedToArray(_useState3, 2),\n      rowsPerPage = _useState4[0],\n      setRowsPerPage = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      totalStoragesAmount = _useState6[0],\n      setTotalStoragesAmount = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      storages = _useState8[0],\n      setStorages = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      formDialogOpen = _useState10[0],\n      setFormDialogOpen = _useState10[1];\n\n  var _useState11 = useState(-1),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedStorageId = _useState12[0],\n      setSelectedStorageId = _useState12[1];\n\n  var _useToast = useToast(),\n      _useToast2 = _slicedToArray(_useToast, 2),\n      toastComponent = _useToast2[0],\n      showToastComponent = _useToast2[1];\n\n  var _useState13 = useState('asc'),\n      _useState14 = _slicedToArray(_useState13, 2),\n      order = _useState14[0],\n      setOrder = _useState14[1];\n\n  var _useState15 = useState('status'),\n      _useState16 = _slicedToArray(_useState15, 2),\n      orderBy = _useState16[0],\n      setOrderBy = _useState16[1];\n\n  var REMOVE_TITLE = \"Do you want to remove the storage ?\";\n  useEffect(function () {\n    insertStorages();\n  }, []);\n\n  var handleRequestSort = function handleRequestSort(event, property) {\n    var isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  var insertStorages = function insertStorages() {\n    var curPage,\n        curRowsPerPage,\n        url,\n        result,\n        _args = arguments;\n    return _regeneratorRuntime.async(function insertStorages$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            curPage = _args.length > 0 && _args[0] !== undefined ? _args[0] : page;\n            curRowsPerPage = _args.length > 1 && _args[1] !== undefined ? _args[1] : rowsPerPage;\n            _context.prev = 2;\n            url = STORAGE_URL + \"?page=\" + curPage + \"&storagesPerPage=\" + curRowsPerPage;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(makeRequest(\"GET\", url));\n\n          case 6:\n            result = _context.sent;\n            setStorages(result.data.storages.map(function (s) {\n              return getSimplePropertiesFromObject(s);\n            }));\n            setTotalStoragesAmount(result.data.totalAmount);\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](2);\n            handleRequestError(_context.t0, showToastComponent);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[2, 11]], Promise);\n  };\n\n  var deleteStorage = function deleteStorage(id) {\n    makeRequest(\"DELETE\", STORAGE_URL + \"/\" + id).then(function (res) {\n      insertStorages();\n      showToastComponent(\"Storage has been deleted\", \"success\");\n    }).catch(function (error) {\n      return handleRequestError(error, showToastComponent);\n    });\n  };\n\n  var handleChangePage = function handleChangePage(event, newPage) {\n    setPage(newPage);\n    insertStorages(newPage);\n  };\n\n  var handleTableRowClick = function handleTableRowClick(auto) {\n    setSelectedStorageId(auto.id);\n    setFormDialogOpen(true);\n  };\n\n  var handleChangeRowsPerPage = function handleChangeRowsPerPage(event) {\n    setRowsPerPage(+event.target.value);\n    setPage(0);\n    insertStorages(page, +event.target.value);\n  };\n\n  return React.createElement(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, React.createElement(Paper, {\n    className: \"table-paper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, React.createElement(TableContainer, {\n    className: \"table-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, React.createElement(\"div\", {\n    className: \"table-header-wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, React.createElement(Typography, {\n    variant: \"button\",\n    display: \"block\",\n    gutterBottom: true,\n    style: {\n      fontSize: 26,\n      marginLeft: 15,\n      marginTop: 15,\n      textDecoration: \"underline\"\n    },\n    className: \"table-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, React.createElement(LibraryBooksIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }), \"Storages\"), React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      return setFormDialogOpen(true);\n    },\n    className: \"add-table-btn\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, React.createElement(LibraryAddRoundedIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }))), React.createElement(Table, {\n    \"aria-label\": \"sticky table\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, React.createElement(EnhancedTableHead, {\n    columns: columns,\n    order: order,\n    orderBy: orderBy,\n    onRequestSort: handleRequestSort,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }), React.createElement(TableBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, stableSort(storages, getComparator(order, orderBy)).map(function (storage) {\n    return React.createElement(TableRow, {\n      onClick: function onClick() {\n        handleTableRowClick(storage);\n      },\n      hover: true,\n      role: \"checkbox\",\n      tabIndex: -1,\n      key: storage.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 41\n      }\n    }, React.createElement(TableCell, {\n      key: columns[0].id,\n      align: columns[0].align,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 45\n      }\n    }, storage.country), React.createElement(TableCell, {\n      key: columns[1].id,\n      align: columns[1].align,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 45\n      }\n    }, storage.city), React.createElement(TableCell, {\n      key: columns[2].id,\n      align: columns[2].align,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 45\n      }\n    }, storage.street), React.createElement(TableCell, {\n      key: columns[3].id,\n      align: columns[3].align,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 45\n      }\n    }, storage.house), React.createElement(TableCell, {\n      key: columns[4].id,\n      align: columns[4].align,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 45\n      }\n    }, storage.email), React.createElement(TableCell, {\n      key: columns[5].id,\n      align: columns[5].align,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 45\n      }\n    }, storage.phone), React.createElement(TableCell, {\n      key: columns[6].id,\n      align: columns[6].align,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 45\n      }\n    }, React.createElement(\"div\", {\n      className: \"table-delete-edit-div\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 49\n      }\n    }, React.createElement(Tooltip, {\n      title: \"Click to edit storage\",\n      arrow: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 53\n      }\n    }, React.createElement(Button, {\n      className: \"menu-table-btn\",\n      color: \"primary\",\n      startIcon: React.createElement(EditIcon, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 72\n        }\n      }),\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        handleTableRowClick(storage);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 57\n      }\n    })), React.createElement(ConfirmDeletingDialog, {\n      id: storage.id,\n      onDelete: deleteStorage,\n      text: REMOVE_TITLE,\n      toolTitle: \"Click to delete storage\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 53\n      }\n    }))));\n  })))), React.createElement(TablePagination, {\n    rowsPerPageOptions: [10, 15, 20],\n    component: \"div\",\n    count: totalStoragesAmount,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    onChangePage: handleChangePage,\n    onChangeRowsPerPage: handleChangeRowsPerPage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  }), React.createElement(StorageDialog, {\n    open: formDialogOpen,\n    storageId: selectedStorageId,\n    onClose: function onClose() {\n      setFormDialogOpen(false);\n      setSelectedStorageId(-1);\n    },\n    refreshTable: insertStorages,\n    showToast: showToastComponent,\n    handleError: handleRequestError,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }\n  }), toastComponent));\n});","map":{"version":3,"sources":["D:/projects/cargo_app/frontend/src/components/roles/dispatcher/storages/storages-table.js"],"names":["React","useEffect","useState","Paper","Table","TableBody","TableCell","TableContainer","TablePagination","TableRow","useToast","Button","EditIcon","handleRequestError","makeRequest","STORAGE_URL","ConfirmDeletingDialog","StorageDialog","Typography","LibraryAddRoundedIcon","connect","LibraryBooksIcon","Tooltip","EnhancedTableHead","getComparator","stableSort","getSimplePropertiesFromObject","MIN_WIDTH","ALIGN","FONT_SIZE","columns","id","label","minWidth","align","fontSize","mapStateToProps","store","role","user","roles","StorageTable","props","page","setPage","rowsPerPage","setRowsPerPage","totalStoragesAmount","setTotalStoragesAmount","storages","setStorages","formDialogOpen","setFormDialogOpen","selectedStorageId","setSelectedStorageId","toastComponent","showToastComponent","order","setOrder","orderBy","setOrderBy","REMOVE_TITLE","insertStorages","handleRequestSort","event","property","isAsc","curPage","curRowsPerPage","url","result","data","map","s","totalAmount","deleteStorage","then","res","catch","error","handleChangePage","newPage","handleTableRowClick","auto","handleChangeRowsPerPage","target","value","marginLeft","marginTop","textDecoration","storage","country","city","street","house","email","phone","e","stopPropagation"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport useToast from \"../../../parts/toast-notification/useToast\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport {handleRequestError, makeRequest, STORAGE_URL} from \"../../../parts/util/request-util\";\r\nimport ConfirmDeletingDialog from \"../../admin/slide-dialog\";\r\nimport {StorageDialog} from \"./storage-dialog\";\r\nimport {Typography} from \"@material-ui/core\";\r\nimport LibraryAddRoundedIcon from \"@material-ui/icons/LibraryAddRounded\";\r\nimport {connect} from \"react-redux\";\r\nimport LibraryBooksIcon from \"@material-ui/icons/LibraryBooks\";\r\nimport \"../styles/storage-form.css\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport EnhancedTableHead, {getComparator, stableSort} from \"../../../parts/util/sorted-table-head\";\r\nimport {getSimplePropertiesFromObject} from \"../../../parts/util/function-util\";\r\n\r\nconst MIN_WIDTH = 170;\r\nconst ALIGN = \"left\";\r\nconst FONT_SIZE = 18;\r\n\r\nconst columns = [\r\n    {id: \"country\", label: \"Country\", minWidth: MIN_WIDTH, align: ALIGN, fontSize: FONT_SIZE},\r\n    {id: \"city\", label: \"City\", minWidth: MIN_WIDTH, align: ALIGN, fontSize: FONT_SIZE},\r\n    {id: \"street\", label: \"Street\", minWidth: MIN_WIDTH, align: ALIGN, fontSize: FONT_SIZE},\r\n    {id: \"house\", label: \"House\", minWidth: MIN_WIDTH, align: ALIGN, fontSize: FONT_SIZE},\r\n    {id: \"email\", label: \"Email\", minWidth: MIN_WIDTH, align: ALIGN, fontSize: FONT_SIZE},\r\n    {id: \"phone\", label: \"Phone\", minWidth: 140, align: ALIGN, fontSize: FONT_SIZE},\r\n    {id: \"edit_delete\", align: \"right\"}\r\n];\r\n\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        role: store.user.roles[0]\r\n    }\r\n};\r\n\r\nexport const StorageTable = connect(mapStateToProps)((props) => {\r\n    const [page, setPage] = useState(0);\r\n    const [rowsPerPage, setRowsPerPage] = useState(10);\r\n    const [totalStoragesAmount, setTotalStoragesAmount] = useState(0);\r\n\r\n    const [storages, setStorages] = useState([]);\r\n    const [formDialogOpen, setFormDialogOpen] = useState(false);\r\n    const [selectedStorageId, setSelectedStorageId] = useState(-1);\r\n    const [toastComponent, showToastComponent] = useToast();\r\n    const [order, setOrder] = useState('asc');\r\n    const [orderBy, setOrderBy] = useState('status');\r\n\r\n    const REMOVE_TITLE = \"Do you want to remove the storage ?\";\r\n\r\n    useEffect(() => {\r\n        insertStorages()\r\n    }, []);\r\n\r\n\r\n    const handleRequestSort = (event, property) => {\r\n        const isAsc = orderBy === property && order === 'asc';\r\n        setOrder(isAsc ? 'desc' : 'asc');\r\n        setOrderBy(property);\r\n    };\r\n\r\n    const insertStorages = async (curPage = page, curRowsPerPage = rowsPerPage) => {\r\n        try {\r\n            let url = `${STORAGE_URL}?page=${curPage}&storagesPerPage=${curRowsPerPage}`\r\n            let result = await makeRequest(\"GET\", url);\r\n            setStorages(result.data.storages.map(s => getSimplePropertiesFromObject(s)));\r\n            setTotalStoragesAmount(result.data.totalAmount)\r\n        } catch (err) {\r\n            handleRequestError(err, showToastComponent)\r\n        }\r\n    };\r\n\r\n\r\n    const deleteStorage = (id) => {\r\n        makeRequest(\"DELETE\", STORAGE_URL + \"/\" + id)\r\n            .then(res => {\r\n                insertStorages();\r\n                showToastComponent(\"Storage has been deleted\", \"success\");\r\n            })\r\n            .catch(error => handleRequestError(error, showToastComponent))\r\n    };\r\n\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        setPage(newPage);\r\n        insertStorages(newPage);\r\n    };\r\n\r\n    const handleTableRowClick = (auto) => {\r\n        setSelectedStorageId(auto.id);\r\n        setFormDialogOpen(true);\r\n    };\r\n\r\n    const handleChangeRowsPerPage = (event) => {\r\n        setRowsPerPage(+event.target.value);\r\n        setPage(0);\r\n        insertStorages(page, +event.target.value);\r\n    };\r\n\r\n\r\n    return (\r\n        <main>\r\n            <Paper className=\"table-paper\">\r\n                <TableContainer className=\"table-container\">\r\n                    <div className=\"table-header-wrapper\">\r\n                        <Typography variant=\"button\" display=\"block\" gutterBottom\r\n                                    style={{fontSize: 26, marginLeft: 15, marginTop: 15, textDecoration: \"underline\"}}\r\n                                    className=\"table-title\"\r\n                        >\r\n                            <LibraryBooksIcon/>\r\n                            Storages\r\n                        </Typography>\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={() => setFormDialogOpen(true)}\r\n                            className=\"add-table-btn\"\r\n                        >\r\n                            <LibraryAddRoundedIcon/>\r\n                        </Button>\r\n                    </div>\r\n\r\n                    <Table aria-label=\"sticky table\">\r\n                        <EnhancedTableHead\r\n                            columns={columns}\r\n                            order={order}\r\n                            orderBy={orderBy}\r\n                            onRequestSort={handleRequestSort}\r\n                        />\r\n                        <TableBody>\r\n                            {stableSort(storages, getComparator(order, orderBy))\r\n                                .map((storage) => {\r\n\r\n                                    return (\r\n                                        <TableRow\r\n                                            onClick={() => {\r\n                                                handleTableRowClick(storage);\r\n                                            }}\r\n                                            hover\r\n                                            role=\"checkbox\"\r\n                                            tabIndex={-1}\r\n                                            key={storage.id}\r\n                                        >\r\n                                            <TableCell key={columns[0].id} align={columns[0].align}>\r\n                                                {storage.country}\r\n                                            </TableCell>\r\n                                            <TableCell key={columns[1].id} align={columns[1].align}>\r\n                                                {storage.city}\r\n                                            </TableCell>\r\n                                            <TableCell key={columns[2].id} align={columns[2].align}>\r\n                                                {storage.street}\r\n                                            </TableCell>\r\n                                            <TableCell key={columns[3].id} align={columns[3].align}>\r\n                                                {storage.house}\r\n                                            </TableCell>\r\n                                            <TableCell key={columns[4].id} align={columns[4].align}>\r\n                                                {storage.email}\r\n                                            </TableCell>\r\n                                            <TableCell key={columns[5].id} align={columns[5].align}>\r\n                                                {storage.phone}\r\n                                            </TableCell>\r\n                                            <TableCell key={columns[6].id} align={columns[6].align}>\r\n                                                <div className=\"table-delete-edit-div\">\r\n                                                    <Tooltip title=\"Click to edit storage\"\r\n                                                             arrow>\r\n                                                        <Button\r\n                                                            className=\"menu-table-btn\"\r\n                                                            color={\"primary\"}\r\n                                                            startIcon={<EditIcon/>}\r\n                                                            onClick={(e) => {\r\n                                                                e.stopPropagation();\r\n                                                                handleTableRowClick(storage)\r\n                                                            }}/>\r\n                                                    </Tooltip>\r\n                                                    <ConfirmDeletingDialog\r\n                                                        id={storage.id}\r\n                                                        onDelete={deleteStorage}\r\n                                                        text={REMOVE_TITLE}\r\n                                                        toolTitle=\"Click to delete storage\"\r\n                                                    />\r\n                                                </div>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    );\r\n                                })}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n\r\n                <TablePagination\r\n                    rowsPerPageOptions={[10, 15, 20]}\r\n                    component=\"div\"\r\n                    count={totalStoragesAmount}\r\n                    rowsPerPage={rowsPerPage}\r\n                    page={page}\r\n                    onChangePage={handleChangePage}\r\n                    onChangeRowsPerPage={handleChangeRowsPerPage}\r\n                />\r\n\r\n                <StorageDialog\r\n                    open={formDialogOpen}\r\n                    storageId={selectedStorageId}\r\n                    onClose={() => {\r\n                        setFormDialogOpen(false);\r\n                        setSelectedStorageId(-1);\r\n                    }}\r\n                    refreshTable={insertStorages}\r\n                    showToast={showToastComponent}\r\n                    handleError={handleRequestError}\r\n                />\r\n                {toastComponent}\r\n            </Paper>\r\n        </main>\r\n    );\r\n})"]},"metadata":{},"sourceType":"module"}